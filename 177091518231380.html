data:text/html;base64,PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbi11cyI+DQoNCjxoZWFkPg0KICAgIDxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9nZW5penkvd2ViLXBvcnRAbWFpbi9waXp6YS10b3dlci8iPg0KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPg0KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiAvPg0KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ2aWV3cG9ydC1maXQ9Y292ZXIsIHdpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1pbmltdW0tc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCIgLz4NCiAgICA8bGluayByZWw9Imljb24iIHR5cGU9IngtaWNvbiIgaHJlZj0iZmF2aWNvbi5wbmciPg0KICAgIDx0aXRsZT5QaXp6YSBUb3dlciAxLjEuMCBXZWIgUG9ydDwvdGl0bGU+DQogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJpbmRleC5jc3MiPg0KPC9oZWFkPg0KDQo8Ym9keT4NCiAgICA8Y2FudmFzIGNsYXNzPSJlbXNjcmlwdGVuIiBpZD0iY2FudmFzIiBvbmNvbnRleHRtZW51PSJldmVudC5wcmV2ZW50RGVmYXVsdCgpIiB0YWJpbmRleD0iLTEiPg0KICAgIDwvY2FudmFzPg0KICAgIDxkaXYgaWQ9InBhdXNlTWVudUNvbnRhaW5lciIgaGlkZGVuPg0KICAgICAgICA8ZGl2IGlkPSJwYXVzZU1lbnVCb3JkZXIiPg0KICAgICAgICAgICAgPGRpdiBpZD0icGF1c2VNZW51Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJyZXN1bWVCdXR0b24iIG9uY2xpY2s9InJlc3VtZSgpIj4gUmVzdW1lIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InF1aXRCdXR0b24iIG9uY2xpY2s9InF1aXRJZlN1cHBvcnRlZCgpIj4gUXVpdCA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJsb2FkaW5nIj4NCiAgICAgICAgPGRpdiBjbGFzcz0ic3Bpbm5lciIgaWQ9InNwaW5uZXIiPjwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJlbXNjcmlwdGVuIiBpZD0ic3RhdHVzIj5Eb3dubG9hZGluZy4uLjwvZGl2Pg0KICAgICAgICA8cHJvZ3Jlc3MgdmFsdWU9IjAiIG1heD0iMTAwIiBpZD0icHJvZ3Jlc3MiIGhpZGRlbj0iMSI+PC9wcm9ncmVzcz4NCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJvdXRwdXQtY29udGFpbmVyIiBpZD0ib3V0cHV0LWNvbnRhaW5lciI+DQogICAgICAgIDxkaXYgaWQ9Im1lc3NhZ2UtY29udGFpbmVyIj4NCiAgICAgICAgICAgIDxkaXYgaWQ9Im1lc3NhZ2VzIj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPHNjcmlwdD4NCiAgICAgICAgICBmdW5jdGlvbiBtZXJnZUZpbGVzKGZpbGVQYXJ0cykgew0KICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgICAgICAgbGV0IGJ1ZmZlcnMgPSBbXTsNCiAgICAgIA0KICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZmV0Y2hQYXJ0KGluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IGZpbGVQYXJ0cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lcmdlZEJsb2IgPSBuZXcgQmxvYihidWZmZXJzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lcmdlZEZpbGVVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1lcmdlZEJsb2IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lcmdlZEZpbGVVcmwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGZldGNoKGZpbGVQYXJ0c1tpbmRleF0pLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKS50aGVuKChkYXRhKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQYXJ0KGluZGV4ICsgMSk7DQogICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2gocmVqZWN0KTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGZldGNoUGFydCgwKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgDQogICAgICAgICAgZnVuY3Rpb24gZ2V0UGFydHMoZmlsZSwgc3RhcnQsIGVuZCkgew0KICAgICAgICAgICAgICBsZXQgcGFydHMgPSBbXTsNCiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGZpbGUgKyAiLnBhcnQiICsgaSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzOw0KICAgICAgICAgIH0NCiAgICAgIA0KICAgICAgICAgIG1lcmdlRmlsZXMoZ2V0UGFydHMoImdhbWUudW54IiwgMSwgMTMpKS50aGVuKGFzeW5jIHVybCA9PiB7DQogICAgICAgICAgICAgIHdpbmRvdy5nYW1lVW54VXJsID0gdXJsOw0KICAgICAgDQogICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRmV0Y2ggPSB3aW5kb3cuZmV0Y2g7DQogICAgICAgICAgICAgIHdpbmRvdy5mZXRjaCA9IGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7DQogICAgICAgICAgICAgICAgICBsZXQgW3VybCwgb3B0aW9uc10gPSBhcmdzOw0KICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnICYmIHVybC5pbmNsdWRlcygiZ2FtZS51bngiKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJmZXRjaDoiLCB1cmwpOw0KICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHdpbmRvdy5nYW1lVW54VXJsOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1cmwgaW5zdGFuY2VvZiBSZXF1ZXN0ICYmIHVybC51cmwuaW5jbHVkZXMoImdhbWUudW54IikpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZmV0Y2ggcmVxdWVzdDoiLCB1cmwudXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgUmVxdWVzdCh3aW5kb3cuZ2FtZVVueFVybCwgdXJsKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEZldGNoLmNhbGwodGhpcywgdXJsLCBvcHRpb25zKTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgIA0KICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbE9wZW4gPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbjsNCiAgICAgICAgICAgICAgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAobWV0aG9kLCB1cmwsIC4uLnJlc3QpIHsNCiAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5jbHVkZXMoImdhbWUudW54IikpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiWEhSOiIsIHVybCk7DQogICAgICAgICAgICAgICAgICAgICAgdXJsID0gd2luZG93LmdhbWVVbnhVcmw7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIC4uLnJlc3QpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICBsZXQgaW5kZXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCiAgICAgICAgICAgICAgaW5kZXguc3JjID0gImluZGV4LmpzIjsNCiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbmRleCk7DQogICAgICANCiAgICAgICAgICAgICAgbGV0IHJ1bm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICAgICAgICBydW5uZXIuc3JjID0gInJ1bm5lci5qcyI7DQogICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocnVubmVyKTsNCiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBtZXJnZSBmaWxlczoiLCBlcnJvcik7DQogICAgICAgICAgfSk7DQogICAgICA8L3NjcmlwdD4gICAgICANCjwvYm9keT4NCg0KPC9odG1sPg==