data:text/html;base64,PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbi11cyI+DQoNCjxoZWFkPg0KICAgIDxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC93ZWItcG9ydHMvY3VwaGVhZEBtYWluLyI+DQogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCiAgICA8dGl0bGU+VW5pdHkgV2ViR0wgUGxheWVyIHwgQ3VwaGVhZDwvdGl0bGU+DQogICAgPHN0eWxlPg0KICAgICAgICBodG1sLA0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzIzMUYyMDsNCiAgICAgICAgfQ0KDQogICAgICAgICN1bml0eS1jYW52YXMgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgaW5zZXQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjMxRjIwOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCjwvaGVhZD4NCg0KPGJvZHk+DQogICAgPGRpdiBpZD0ibG9hZGluZy10ZXh0IiBzdHlsZT0iY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDQ4cHg7IGZvbnQtZmFtaWx5OiBjdXJzaXZlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDIwcHg7Ij4gTE9BRElORy4uLiA8L2Rpdj4NCiAgICA8ZGl2IGlkPSJ1bml0eUNvbnRhaW5lciI+PC9kaXY+DQogICAgPHNjcmlwdCBzcmM9IkJ1aWxkL1VuaXR5TG9hZGVyLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0Pg0KICAgICAgICB2YXIgbG9hZGluZ1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbG9hZGluZy10ZXh0Iik7DQogICAgDQogICAgICAgIGxldCB0b3RhbEJ5dGVzID0gMDsNCiAgICAgICAgbGV0IGxvYWRlZEJ5dGVzID0gMDsNCiAgICANCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0U2l6ZSh1cmwpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZDogIkhFQUQiIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChyZXMuaGVhZGVycy5nZXQoIkNvbnRlbnQtTGVuZ3RoIikgfHwgIjAiLCAxMCk7DQogICAgICAgICAgICB9IGNhdGNoIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhQcm9ncmVzcyh1cmwpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsNCiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7DQogICAgICAgICAgICBsZXQgY2h1bmtzID0gW107DQogICAgICAgICAgICBsZXQgcmVjZWl2ZWQgPSAwOw0KICAgIA0KICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpOw0KICAgICAgICAgICAgICAgIGlmIChkb25lKSBicmVhazsNCiAgICAgICAgICAgICAgICByZWNlaXZlZCArPSB2YWx1ZS5sZW5ndGg7DQogICAgICAgICAgICAgICAgbG9hZGVkQnl0ZXMgKz0gdmFsdWUubGVuZ3RoOw0KICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKHZhbHVlKTsNCiAgICANCiAgICAgICAgICAgICAgICBsZXQgbWJEb25lID0gKGxvYWRlZEJ5dGVzIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgICAgICBsZXQgbWJUb3RhbCA9ICcyMTI3LjUyJzsNCiAgICAgICAgICAgICAgICBsb2FkaW5nVGV4dC50ZXh0Q29udGVudCA9IGBMT0FESU5HLi4uICR7bWJEb25lfSBNQiAvICR7bWJUb3RhbH0gTUJgOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgbGV0IGZ1bGxCdWZmZXIgPSBuZXcgVWludDhBcnJheShyZWNlaXZlZCk7DQogICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDsNCiAgICAgICAgICAgIGZvciAobGV0IGNodW5rIG9mIGNodW5rcykgew0KICAgICAgICAgICAgICAgIGZ1bGxCdWZmZXIuc2V0KGNodW5rLCBvZmZzZXQpOw0KICAgICAgICAgICAgICAgIG9mZnNldCArPSBjaHVuay5sZW5ndGg7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZnVsbEJ1ZmZlci5idWZmZXI7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbWVyZ2VGaWxlcyhmaWxlUGFydHMpIHsNCiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlUGFydHMubWFwKHBhcnQgPT4gZmV0Y2hXaXRoUHJvZ3Jlc3MocGFydCkpKTsNCiAgICAgICAgICAgIGNvbnN0IG1lcmdlZEJsb2IgPSBuZXcgQmxvYihidWZmZXJzKTsNCiAgICAgICAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG1lcmdlZEJsb2IpOw0KICAgICAgICB9DQogICAgDQogICAgICAgIGZ1bmN0aW9uIGdldFBhcnRzKGZpbGUsIHN0YXJ0LCBlbmQpIHsNCiAgICAgICAgICAgIGxldCBwYXJ0cyA9IFtdOw0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7DQogICAgICAgICAgICAgICAgcGFydHMucHVzaChmaWxlICsgIi5wYXJ0IiArIGkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHBhcnRzOw0KICAgICAgICB9DQogICAgDQogICAgICAgIGZ1bmN0aW9uIHJlc2l6ZVVuaXR5Q29udGFpbmVyKCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0eUNvbnRhaW5lciIpOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggKyAicHgiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCArICJweCI7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGFsbFBhcnRzID0gWw0KICAgICAgICAgICAgICAgIC4uLmdldFBhcnRzKCJCdWlsZC9CdWlsZC5hc20uY29kZS51bml0eXdlYiIsIDEsIDMpLA0KICAgICAgICAgICAgICAgIC4uLmdldFBhcnRzKCJCdWlsZC9CdWlsZC5kYXRhLnVuaXR5d2ViIiwgMSwgMTAyKSwNCiAgICAgICAgICAgICAgICAuLi5nZXRQYXJ0cygiQnVpbGQvQnVpbGQud2FzbS5jb2RlLnVuaXR5d2ViIiwgMSwgMiksDQogICAgICAgICAgICBdOw0KICAgIA0KICAgICAgICAgICAgY29uc3Qgc2l6ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChhbGxQYXJ0cy5tYXAoZ2V0U2l6ZSkpOw0KICAgICAgICAgICAgdG90YWxCeXRlcyA9IHNpemVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApOw0KICAgIA0KICAgICAgICAgICAgY29uc3QgW2FzbXVybCwgZGF0YVVybCwgd2FzbXVybF0gPSBhd2FpdCBQcm9taXNlLmFsbChbDQogICAgICAgICAgICAgICAgbWVyZ2VGaWxlcyhnZXRQYXJ0cygiQnVpbGQvQnVpbGQuYXNtLmNvZGUudW5pdHl3ZWIiLCAxLCAzKSksDQogICAgICAgICAgICAgICAgbWVyZ2VGaWxlcyhnZXRQYXJ0cygiQnVpbGQvQnVpbGQuZGF0YS51bml0eXdlYiIsIDEsIDEwMikpLA0KICAgICAgICAgICAgICAgIG1lcmdlRmlsZXMoZ2V0UGFydHMoIkJ1aWxkL0J1aWxkLndhc20uY29kZS51bml0eXdlYiIsIDEsIDIpKSwNCiAgICAgICAgICAgIF0pOw0KICAgIA0KICAgICAgICAgICAgY29uc3QganNvbiA9IHsNCiAgICAgICAgICAgICAgICAiY29tcGFueU5hbWUiOiAiU3BhbmlzaEZyZWRkeSIsDQogICAgICAgICAgICAgICAgInByb2R1Y3ROYW1lIjogIkN1cGhlYWQiLA0KICAgICAgICAgICAgICAgICJkYXRhVXJsIjogZGF0YVVybCwNCiAgICAgICAgICAgICAgICAid2FzbUNvZGVVcmwiOiB3YXNtdXJsLA0KICAgICAgICAgICAgICAgICJ3YXNtRnJhbWV3b3JrVXJsIjogIkJ1aWxkLndhc20uZnJhbWV3b3JrLnVuaXR5d2ViIiwNCiAgICAgICAgICAgICAgICAiYXNtQ29kZVVybCI6IGFzbXVybCwNCiAgICAgICAgICAgICAgICAiYXNtTWVtb3J5VXJsIjogIkJ1aWxkLmFzbS5tZW1vcnkudW5pdHl3ZWIiLA0KICAgICAgICAgICAgICAgICJhc21GcmFtZXdvcmtVcmwiOiAiQnVpbGQuYXNtLmZyYW1ld29yay51bml0eXdlYiIsDQogICAgICAgICAgICAgICAgIlRPVEFMX01FTU9SWSI6IDEwMDAwMDAwMCwNCiAgICAgICAgICAgICAgICAiZ3JhcGhpY3NBUEkiOiBbIldlYkdMIDIuMCJdLA0KICAgICAgICAgICAgICAgICJ3ZWJnbENvbnRleHRBdHRyaWJ1dGVzIjogeyAicHJlc2VydmVEcmF3aW5nQnVmZmVyIjogZmFsc2UgfSwNCiAgICAgICAgICAgICAgICAic3BsYXNoU2NyZWVuU3R5bGUiOiAiRGFyayIsDQogICAgICAgICAgICAgICAgImJhY2tncm91bmRDb2xvciI6ICIjMjMxRjIwIg0KICAgICAgICAgICAgfTsNCiAgICANCiAgICAgICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGpzb24pXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIgfSk7DQogICAgICAgICAgICBsZXQgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVzaXplVW5pdHlDb250YWluZXIpOw0KICAgIA0KICAgICAgICAgICAgVW5pdHlMb2FkZXIuaW5zdGFudGlhdGUoInVuaXR5Q29udGFpbmVyIiwganNvbiwgew0KICAgICAgICAgICAgICAgIHVybDogYmxvYlVybCwNCiAgICAgICAgICAgICAgICBNb2R1bGU6IHsNCiAgICAgICAgICAgICAgICAgICAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZVVuaXR5Q29udGFpbmVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbG9hZGluZy10ZXh0IikucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgZnVuY3Rpb24gcmVzaXplQ2FudmFzKCkgew0KICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidW5pdHlDb250YWluZXIiKTsNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCArICJweCI7DQogICAgICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCArICJweCI7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXNpemVDYW52YXMsIDEwMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVzaXplQ2FudmFzKCk7DQogICAgICAgIH0pKCk7DQogICAgPC9zY3JpcHQ+DQogICAgDQo8L2JvZHk+DQoNCjwvaHRtbD4NCg==